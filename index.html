<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RSEBL Market Tracker</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <header>
    <div class="header-inner">
      <div class="logo">
        <span class="logo-flag">ðŸ‡§ðŸ‡¹</span>
        <div>
          <span class="logo-title">RSEBL Tracker</span>
          <span class="logo-sub">Royal Securities Exchange of Bhutan</span>
        </div>
      </div>
      <div class="header-stats">
        <div class="stat-chip" id="bsi-chip">
          <span class="stat-label">BSI</span>
          <span class="stat-value" id="bsi-value">â€”</span>
        </div>
        <div class="stat-chip">
          <span class="stat-label">Securities</span>
          <span class="stat-value" id="total-count">â€”</span>
        </div>
        <div class="stat-chip">
          <span class="stat-label">Updated</span>
          <span class="stat-value" id="last-updated">â€”</span>
        </div>
      </div>
    </div>
  </header>

  <main>

    <!-- Sector summary bar -->
    <section class="sector-bar" id="sector-bar"></section>

    <!-- Tab navigation -->
    <nav class="tabs">
      <button class="tab active" data-tab="market">Market</button>
      <button class="tab" data-tab="news">News & Announcements</button>
      <button class="tab" data-tab="portfolio">My Portfolio</button>
    </nav>

    <!-- MARKET TAB -->
    <div class="tab-content active" id="tab-market">
      <div class="table-controls">
        <input type="text" id="search-input" placeholder="Search symbol or company..." />
        <select id="sector-filter">
          <option value="">All Sectors</option>
        </select>
        <span id="row-count"></span>
      </div>
      <div class="table-wrap">
        <table id="stocks-table">
          <thead>
            <tr>
              <th data-col="symbol" class="sortable">Symbol <span class="sort-icon">â‡…</span></th>
              <th data-col="name" class="sortable">Company <span class="sort-icon">â‡…</span></th>
              <th data-col="price" class="sortable num">Price (Nu.) <span class="sort-icon">â‡…</span></th>
              <th data-col="change_pct" class="sortable num">Change % <span class="sort-icon">â‡…</span></th>
              <th data-col="pe_ratio" class="sortable num">P/E <span class="sort-icon">â‡…</span></th>
              <th data-col="volume" class="sortable num">Volume <span class="sort-icon">â‡…</span></th>
              <th data-col="market_cap" class="sortable num">Mkt Cap <span class="sort-icon">â‡…</span></th>
            </tr>
          </thead>
          <tbody id="stocks-body">
            <tr><td colspan="7" class="loading">Loading market data...</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- NEWS TAB -->
    <div class="tab-content" id="tab-news">
      <div id="news-list" class="news-list">
        <p class="loading">Loading news...</p>
      </div>
    </div>

    <!-- PORTFOLIO TAB -->
    <div class="tab-content" id="tab-portfolio">
      <div class="portfolio-header">
        <div class="portfolio-summary">
          <div class="pf-stat">
            <span class="pf-label">Invested</span>
            <span class="pf-val" id="pf-invested">Nu. 0</span>
          </div>
          <div class="pf-stat">
            <span class="pf-label">Current Value</span>
            <span class="pf-val" id="pf-value">Nu. 0</span>
          </div>
          <div class="pf-stat">
            <span class="pf-label">P&L</span>
            <span class="pf-val" id="pf-pnl">Nu. 0</span>
          </div>
          <div class="pf-stat">
            <span class="pf-label">Return</span>
            <span class="pf-val" id="pf-return">0%</span>
          </div>
        </div>
        <button class="btn-add" id="add-holding-btn">+ Add Holding</button>
      </div>

      <!-- Add holding form -->
      <div class="add-form hidden" id="add-form">
        <select id="form-symbol">
          <option value="">Select security...</option>
        </select>
        <input type="number" id="form-shares" placeholder="Shares" min="1" />
        <input type="number" id="form-buy-price" placeholder="Buy price (Nu.)" min="0" step="0.01" />
        <button class="btn-save" id="save-holding-btn">Add</button>
        <button class="btn-cancel" id="cancel-holding-btn">Cancel</button>
      </div>

      <table id="portfolio-table">
        <thead>
          <tr>
            <th>Symbol</th>
            <th>Company</th>
            <th class="num">Shares</th>
            <th class="num">Buy Price</th>
            <th class="num">Current</th>
            <th class="num">Value</th>
            <th class="num">P&L</th>
            <th class="num">Return</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="portfolio-body">
          <tr><td colspan="9" class="loading">No holdings yet. Add one above.</td></tr>
        </tbody>
      </table>
    </div>

  </main>

  <footer>
    <p>Data scraped daily from <a href="https://rsebl.org.bt" target="_blank" rel="noopener">rsebl.org.bt</a>. Not financial advice.</p>
  </footer>

  <script src="app.js"></script>
</body>
</html>
